<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>μκ°•μƒ κ΄€λ¦¬</title>
    <link rel="stylesheet" href="/css/instructor/course_students.css">
</head>
<body>
    <!-- κ³µν†µ ν—¤λ” -->
    <div th:replace="~{common/header :: header}"></div>
    
    <div class="container">
        <div class="page-header">
            <h1 th:text="${#authentication != null and #authentication.principal != null and #strings.equals(#authentication.principal.role, 'ADMIN') ? 'μ „μ²΄ μκ°•μƒ κ΄€λ¦¬' : 'μκ°•μƒ κ΄€λ¦¬'}">μκ°•μƒ κ΄€λ¦¬</h1>
            <p th:text="${#authentication != null and #authentication.principal != null and #strings.equals(#authentication.principal.role, 'ADMIN') ? 'μ‹μ¤ν…μ λ¨λ“  κ°•μλ³„ μκ°•μƒ ν„ν™©κ³Ό ν†µκ³„λ¥Ό ν™•μΈν•μ„Έμ”' : 'κ°•μλ³„ μκ°•μƒ ν„ν™©κ³Ό ν†µκ³„λ¥Ό ν™•μΈν•μ„Έμ”'}">κ°•μλ³„ μκ°•μƒ ν„ν™©κ³Ό ν†µκ³„λ¥Ό ν™•μΈν•μ„Έμ”</p>
        </div>
        
        <!-- μ „μ²΄ ν†µκ³„ -->
        <div class="overall-stats">
            <div class="stat-summary">
                <div class="stat-item">
                    <div class="stat-number" th:text="${#lists.size(courses)}">0</div>
                    <div class="stat-label" th:text="${#authentication != null and #authentication.principal != null and #strings.equals(#authentication.principal.role, 'ADMIN') ? 'μ „μ²΄ κ°•μ' : 'λ“±λ΅ κ°•μ'}">λ“±λ΅ κ°•μ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">
                        <span th:text="${totalStudents}">0</span>
                    </div>
                    <div class="stat-label">μ΄ μκ°•μƒ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">
                        <span th:text="${#numbers.formatDecimal(avgRating, 1, 1)}">0.0</span>
                    </div>
                    <div class="stat-label">ν‰κ·  ν‰μ </div>
                </div>
            </div>
        </div>
        
        <!-- κ°•μλ³„ μκ°•μƒ ν„ν™© -->
        <div class="course-enrollments">
            <h2 th:text="${#authentication != null and #authentication.principal != null and #strings.equals(#authentication.principal.role, 'ADMIN') ? 'μ „μ²΄ κ°•μλ³„ μκ°•μƒ ν„ν™©' : 'κ°•μλ³„ μκ°•μƒ ν„ν™©'}">κ°•μλ³„ μκ°•μƒ ν„ν™©</h2>
            
            <div class="course-list">
                <div th:each="course : ${courses}" class="course-enrollment-card">
                    <div class="course-header">
                        <div class="course-info">
                            <h3 class="course-title" th:text="${course.courseName}">κ°•μλ…</h3>
                            <p class="course-category" th:text="${course.category}">μΉ΄ν…κ³ λ¦¬</p>
                            <div class="course-status" th:class="${course.status == 'PUBLISHED' ? 'status-published' : 'status-draft'}">
                                <span th:text="${course.status == 'PUBLISHED' ? 'κ³µκ°' : 'μ„μ‹μ €μ¥'}">μƒνƒ</span>
                            </div>
                        </div>
                        <div class="course-thumbnail">
                            <img th:src="${course.thumbnailUrl}" alt="κ°•μ μΈλ„¤μΌ" 
                                 onerror="this.src='/images/no-image.png';">
                        </div>
                    </div>
                    
                    <div class="enrollment-stats">
                        <div class="stat-grid">
                            <div class="stat-box">
                                <div class="stat-icon">π‘¥</div>
                                <div class="stat-content">
                                    <div class="stat-number" th:text="${course.enrollmentCount != null ? course.enrollmentCount : 0}">0</div>
                                    <div class="stat-label">μκ°•μƒ</div>
                                </div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">β­</div>
                                <div class="stat-content">
                                    <div class="stat-number" th:text="${course.averageRating != null ? course.averageRating : '0.0'}">0.0</div>
                                    <div class="stat-label">ν‰μ </div>
                                </div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">π’¬</div>
                                <div class="stat-content">
                                    <div class="stat-number" th:text="${course.reviewCount != null ? course.reviewCount : 0}">0</div>
                                    <div class="stat-label">λ¦¬λ·°</div>
                                </div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon">π“…</div>
                                <div class="stat-content">
                                    <div class="stat-number" th:text="${course.totalWeeks + 'μ£Ό'}">12μ£Ό</div>
                                    <div class="stat-label">κΈ°κ°„</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="course-actions">
                        <a th:href="@{/course/students/{id}(id=${course.id})}" class="btn btn-primary">
                            μκ°•μƒ μƒμ„Έλ³΄κΈ°
                        </a>
                        <a th:href="@{/course/edit/{id}(id=${course.id})}" class="btn btn-outline">
                            κ°•μ μμ •
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- κ°•μκ°€ μ—†μ„ λ• -->
            <div th:if="${#lists.isEmpty(courses)}" class="empty-state">
                <div class="empty-icon">π‘¥</div>
                <h3 th:text="${#authentication != null and #authentication.principal != null and #strings.equals(#authentication.principal.role, 'ADMIN') ? 'λ“±λ΅λ κ°•μκ°€ μ—†μµλ‹λ‹¤' : 'λ“±λ΅λ κ°•μκ°€ μ—†μµλ‹λ‹¤'}">λ“±λ΅λ κ°•μκ°€ μ—†μµλ‹λ‹¤</h3>
                <p th:text="${#authentication != null and #authentication.principal != null and #strings.equals(#authentication.principal.role, 'ADMIN') ? 'μ‹μ¤ν…μ— λ“±λ΅λ κ°•μκ°€ μ—†μµλ‹λ‹¤' : 'κ°•μλ¥Ό λ“±λ΅ν•λ©΄ μκ°•μƒ ν„ν™©μ„ ν™•μΈν•  μ μμµλ‹λ‹¤'}">κ°•μλ¥Ό λ“±λ΅ν•λ©΄ μκ°•μƒ ν„ν™©μ„ ν™•μΈν•  μ μμµλ‹λ‹¤</p>
                <a href="/course/add" class="btn btn-primary">κ°•μ λ“±λ΅ν•κΈ°</a>
            </div>
        </div>
        
        <!-- μµκ·Ό ν™λ™ -->
        <div class="recent-activity">
            <h2>μµκ·Ό ν™λ™</h2>
            <div class="activity-list">
                <div class="activity-item">
                    <div class="activity-icon">π“</div>
                    <div class="activity-content">
                        <div class="activity-title">μƒλ΅μ΄ μκ°•μƒ λ“±λ΅</div>
                        <div class="activity-desc">νμ΄μ¬ κΈ°μ΄ ν”„λ΅κ·Έλλ°μ— μƒλ΅μ΄ μκ°•μƒμ΄ λ“±λ΅ν–μµλ‹λ‹¤</div>
                        <div class="activity-time">2μ‹κ°„ μ „</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">β­</div>
                    <div class="activity-content">
                        <div class="activity-title">μƒλ΅μ΄ λ¦¬λ·°</div>
                        <div class="activity-desc">μ›Ή κ°λ° κΈ°μ΄ κ°•μμ— 5μ  λ¦¬λ·°κ°€ λ“±λ΅λμ—μµλ‹λ‹¤</div>
                        <div class="activity-time">5μ‹κ°„ μ „</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">β…</div>
                    <div class="activity-content">
                        <div class="activity-title">κ°•μ μ™„λ£</div>
                        <div class="activity-desc">λ°μ΄ν„° λ¶„μ„ μ…λ¬Έ κ°•μλ¥Ό μκ°•μƒμ΄ μ™„λ£ν–μµλ‹λ‹¤</div>
                        <div class="activity-time">1μΌ μ „</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 